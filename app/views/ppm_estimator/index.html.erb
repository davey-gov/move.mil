<%- @page_title = 'Personally Procured Move (PPM) Estimator' -%>

<div class="usa-grid usa-section usa-layout-docs">
  <%= render 'shared/sidenav' %>

  <div class="usa-width-three-fourths usa-layout-docs-main_content">
    <h1><%= @page_title %></h1>

    <h4>
      For your upcoming move, get an estimate for how much the government will
      pay <strong>you</strong> if you choose to "do it yourself."
    </h4>

    <p>
      You can use this money to cover the cost of hiring packers and movers,
      renting moving trucks, and so on. If you spend less to move than the
      government will reimburse you to move yourself, you get to pocket the
      difference!
    </p>

    <%= form_with url: ppm_estimator_path, class: 'ppm-form', method: 'get' do |form| %>
      <fieldset>
        <legend><span></span>What is your rank?</legend>
          <%= form.label :rank, 'Rank' %>
          <%= form.select :rank, options_from_collection_for_select(@entitlements, :slug, :rank), { include_blank: true }, { id: :rank, required: true } %>
      </fieldset>

      <fieldset>
        <legend><span></span>Are you moving with dependents?</legend>
        <%= form.radio_button :dependents, 'yes', { id: :dependents_yes, required: true } %>
        <%= form.label :dependents, raw('<strong>Yes</strong>, I am moving with dependents'), :value => 'yes' %>
        <%= form.radio_button :dependents, 'no', { id: :dependents_no, required: true } %>
        <%= form.label :dependents, raw('<strong>No</strong>, I am not moving with dependents'), :value => 'no' %>
      </fieldset>

      <fieldset>
        <legend><span></span>Where are you moving from?</legend>
        <div class="ppm-image-selector">
          <%= form.radio_button :start_loc, 'conus', id: :start_loc_conus, checked: true %>
          <%= form.label :start_loc, 'CONUS', :value => 'conus', class: 'ppm-image-label conus-image' %>
          <%= form.radio_button :start_loc, 'oconus', id: :start_loc_oconus %>
          <%= form.label :start_loc, 'OCONUS', :value => 'oconus', class: 'ppm-image-label oconus-image' %>
        </div>

        <%= form.label :start, 'Start Location (ZIP Code)' %>
        <%= form.text_field :start, { id: :start, required: true } %>
      </fieldset>

      <fieldset>
        <legend><span></span>Where are you moving to?</legend>
        <div class="ppm-image-selector">
          <%= form.radio_button :dest_loc, 'conus', id: :dest_loc_conus, checked: true %>
          <%= form.label :dest_loc, 'CONUS', :value => 'conus', class: 'ppm-image-label conus-image' %>
          <%= form.radio_button :dest_loc, 'oconus', id: :dest_loc_oconus %>
          <%= form.label :dest_loc, 'OCONUS', :value => 'oconus', class: 'ppm-image-label oconus-image' %>
        </div>

        <%= form.label :end, 'Destination ZIP Code' %>
        <%= form.text_field :end, { id: :end, required: true } %>

      </fieldset>

      <fieldset>
        <legend><span></span>When do you want to move?</legend>
        <%= form.label :date, 'Moving Date' %>
        <%= form.date_field :date, { id: :date, required: true } %>
      </fieldset>

      <fieldset>
        <legend><span></span>How much, in pounds, do you expect to move?</legend>
        <p>
          The government will only reimburse for the actual weight transported
          up to your weight allowance.
          <a href="#TODO">Need help estimating your total household weight?</a>
        </p>
        <p>
          Your weight allowance is <strong>5000 lbs</strong>.
        </p>
        <%= form.label :weight, 'Estimated Household Goods Weight' %>
        <%= form.text_field :weight, { id: :weight, required: true } %>
      </fieldset>

      <fieldset>
        <legend><span></span>Do you plan to pack your household goods yourself?</legend>
        <p>
          The government will pay you the amount equal to the government cost
          to have your belongings professionally packed. The payment can be
          used to cover the packing materials or to hire any help you may need
          to pack your house. Any left over money, you can keep â€” no reciepts
          needed!
          <a href="#TODO">How do I make sure the government pays me my packing entitlement?</a>
        </p>
        <%= form.radio_button :selfpack, 'yes', { id: :selfpack_yes, required: true }  %>
        <%= form.label :selfpack, 'Yes', :value => 'yes' %>
        <%= form.radio_button :selfpack, 'no', { id: :selfpack_no, required: true } %>
        <%= form.label :selfpack, 'No', :value => 'no' %>
      </fieldset>

      <button>Calculate My Estimate</button>
    <% end %>

    <div class="ppm-estimate-table-title">
      Your Government Reimbursement Cost Estimate:<a href="#TODO">Edit Details</a>
    </div>
    <div class="ppm-estimate-table">
      Estimated Transportation Reimbursement<br>
      <span class="ppm-estimate-amount">$800 - $850</span>
      <span class="ppm-estimate-detail">21043, Howard County, MD to 62269, St. Clair County, IL</span><br>
      <span class="ppm-estimate-detail">
        Departing 7/28/2017 (Peak Season)<br>
        6700 lbs
      </span>
    </div>
    <div class="ppm-estimate-table">
      Estimated Packing Reimbursement<br>
      <span class="ppm-estimate-detail">6700 lbs</span>
      <span class="ppm-estimate-amount">$800 - $850</span>
    </div>
    <div class="ppm-estimate-table-total">
      <span class="ppm-estimate-detail-total">Total Estimated Government Reimbursement</span>
      <span class="ppm-estimate-amount-total">$3100 - $3850</span>
    </div>

    <button>Schedule My PPM Move</button>
    <%= link_to ppm_estimator_path do %>
      <button class="usa-button-outline">Start a New Estimate</button>
    <% end %>

    <div class="ppm-footer">
      <strong>Note:</strong> This tool only provides an estimate of what you
      might recieve if you decide to do a personally procured move.
      <strong>Your actual reimbursement rate will be calculated based off the
      daily rates available when you schedule your move in DPS.</strong> Rates
      vary based on transporter availability, selected move date (Peak vs.
      Non-Peak Season), distance traveled, and the actual weight of the shipment.
    </div>

  </div>
</div>
